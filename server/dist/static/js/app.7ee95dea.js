(function(e){function t(t){for(var r,o,c=t[0],s=t[1],u=t[2],f=0,d=[];f<c.length;f++)o=c[f],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={app:0},a={app:0},i=[];function c(e){return s.p+"static/js/"+({about:"about"}[e]||e)+"."+{about:"bbed9ef3"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={about:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var r="static/css/"+({about:"about"}[e]||e)+"."+{about:"036c1075"}[e]+".css",a=s.p+r,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],f=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(f===r||f===a))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],f=u.getAttribute("data-href");if(f===r||f===a)return t()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=t,l.onerror=function(t){var r=t&&t.target&&t.target.src||a,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete o[e],l.parentNode.removeChild(l),n(i)},l.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(l)})).then((function(){o[e]=0})));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=i);var u,f=document.createElement("script");f.charset="utf-8",f.timeout=120,s.nc&&f.setAttribute("nonce",s.nc),f.src=c(e);var d=new Error;u=function(t){f.onerror=f.onload=null,clearTimeout(l);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",d.name="ChunkLoadError",d.type=r,d.request=o,n[1](d)}a[e]=void 0}};var l=setTimeout((function(){u({type:"timeout",target:f})}),12e4);f.onerror=f.onload=u,document.head.appendChild(f)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],f=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var l=f;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0613":function(e,t,n){"use strict";n("b449");var r=n("9666"),o=n("0261"),a=n("9f3a"),i=n("ef27"),c=n.n(i),s=n("f00f"),u=n("50b5");o["default"].use(a["a"]),t["a"]=new a["a"].Store({state:{username:"",socket:{},msgArr:[],isRefreshInfo:!1,isRefreshPendingFriend:!1,isRefreshAgreeFriend:!1},mutations:{init:function(e,t){e.socket=c.a.connect("http://47.100.60.27:4000"),e.socket.emit("addUser",t)},disconnect:function(e){e.socket.emit("mydisconnect"),e.socket={}},addFriend:function(e,t){e.socket.emit("addFriend",t)},agreeFriend:function(e,t){e.socket.emit("agreeFriend",t)},submit:function(e,t){e.socket.emit("sendMsg",t)},message:function(e,t){var n=this;e.socket.on("sendMsgTo"+t,(function(t){e.msgArr.push(t),setTimeout((function(){Object(s["c"])()}))})),e.socket.on("addFriendTo"+t,(function(){n.commit("refreshPendingFriend",!0)})),e.socket.on("agreeFriendTo"+t,(function(){n.commit("refreshAgreeFriend",!0)}))},setMsgArr:function(e,t){e.msgArr=t},refreshInfo:function(e,t){e.isRefreshInfo=t},refreshPendingFriend:function(e,t){e.isRefreshPendingFriend=!0},refreshAgreeFriend:function(e,t){e.isRefreshAgreeFriend=!0}},actions:{SetMsgArr:function(e,t){return Object(r["a"])(regeneratorRuntime.mark((function n(){var r,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,console.log(111),console.log(t),o={showId:t},n.next=6,u["a"].fetch("GetMsgArr",o);case 6:a=n.sent,100===a.data.retCode&&r("setMsgArr",a.data.retData.data);case 8:case"end":return n.stop()}}),n)})))()}},modules:{}})},1:function(e,t){},"4e66":function(e,t,n){},"50b5":function(e,t,n){"use strict";var r=n("a7c7"),o=n("b705"),a=n("1cfa"),i=n.n(a),c=(n("fe59"),n("053b"),n("08ba"),n("2ba1")),s=(n("b449"),n("9666")),u=n("9764"),f=n("6fab"),d=n("82ae"),l=n.n(d),p=function(){function e(t,n,r){var o=this;Object(u["a"])(this,e),this.NetActionObject={},t.forEach((function(e){o.NetActionObject[e.name]=e})),this.http=l.a.create(r),this.netConfig=n||{}}return Object(f["a"])(e,[{key:"fetch",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){var r,o,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.NetActionObject[t],r){e.next=3;break}throw new Error("NetAction: '".concat(t,"' Not Exist"));case 3:return o=this.netConfig.beforeRequest?this.netConfig.beforeRequest(n):n,a="get"===r.type?{params:o}:{data:o},e.prev=5,e.prev=6,e.next=9,this.http(Object(c["a"])(Object(c["a"])({method:r.type,url:r.url},a),r.config));case 9:return i=e.sent,r.needCache&&(r.state=i,r.isStating=!0),this.netConfig.afterResponse&&this.netConfig.afterResponse(i),e.abrupt("return",i);case 15:if(e.prev=15,e.t0=e["catch"](6),"function"!==typeof r.errorHandler){e.next=20;break}return r.errorHandler(e.t0),e.abrupt("return",e.t0);case 20:throw e.t0;case 21:e.next=27;break;case 23:return e.prev=23,e.t1=e["catch"](5),this.netConfig.errorHandler&&this.netConfig.errorHandler(e.t1),e.abrupt("return",e.t1);case 27:case"end":return e.stop()}}),e,this,[[5,23],[6,15]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getCache",value:function(e){var t=this.NetActionObject[e];if(!t)throw new Error("NetAction: '".concat(e,"' Not Exist"));return t.state}},{key:"isStating",value:function(e){var t=this.NetActionObject[e];if(!t)throw new Error("NetAction: '".concat(e,"' Not Exist"));return!!t.isStating}}]),e}(),g=p,h=[{url:"/registered",name:"Registered",type:"post"},{url:"/login",name:"Login",type:"post"},{url:"/editUserInfo",name:"EditUserInfo",type:"post"},{url:"/getMsgArr",name:"GetMsgArr",type:"post"},{url:"/userList",name:"UserList",type:"post"},{url:"/userInfo",name:"UserInfo",type:"post"},{url:"/addFriend",name:"AddFriend",type:"post"},{url:"/getPengingFriend",name:"GetPengingFriend",type:"post"},{url:"/agreeFriend",name:"AgreeFriend",type:"post"},{url:"/getFriend",name:"GetFriend",type:"post"}],b=h,m=n("afbc"),v=Object(r["a"])(b),y=new g(v,{errorHandler:function(e){var t=e.response;if(t&&t.status)switch(t.status){case 404:o["Message"].error("当前访问接口不存在");break;case 401:o["Message"].error("当前接口无访问权限");break;case 500:o["Message"].error("服务器错误");break;default:o["Message"].error("未知的服务器异常发生了，请联系管理员处理，错误状态码: ".concat(t.status));break}},beforeRequest:function(e){return i.a.stringify(e)},afterResponse:function(e){var t=e.data.retCode;101===t&&o["Message"].error(e.data.retMsg),104===t&&(o["Message"].error(e.data.retMsg),m["a"].push({name:"Login"}))}},{validateStatus:function(e){return 200===e}});t["a"]=y},"7c55":function(e,t,n){"use strict";var r=n("4e66"),o=n.n(r);o.a},afbc:function(e,t,n){"use strict";n("053b"),n("e18c");var r=n("0261"),o=n("3f11"),a=n("0613"),i=n("f00f"),c=n("b705");r["default"].use(o["a"]);var s=new r["default"],u=[{path:"/login",name:"Login",component:function(){return n.e("about").then(n.bind(null,"d9c9"))}},{path:"/",name:"Index",component:function(){return n.e("about").then(n.bind(null,"b30e"))},children:[{path:"chat/:userId",name:"Chat",component:function(){return n.e("about").then(n.bind(null,"159b"))}},{path:"editInfo",name:"EditInfo",component:function(){return n.e("about").then(n.bind(null,"1f1e"))}}]}],f=new o["a"]({routes:u});f.beforeEach((function(e,t,n){"Login"===e.name?(Object(i["b"])()&&(s.$cookies.remove("userInfo"),a["a"].commit("disconnect")),n()):Object(i["b"])()?n():(c["Message"].warning("登陆失效"),n({name:"Login"}))})),t["a"]=f},cd49:function(e,t,n){"use strict";n.r(t);n("a133"),n("ed0d"),n("f09c"),n("e117");var r=n("0261"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],i=(n("7c55"),n("9ca4")),c={},s=Object(i["a"])(c,o,a,!1,null,null,null),u=s.exports,f=n("afbc"),d=n("0613"),l=n("b705"),p=n.n(l),g=(n("3880"),n("df4e"),n("a4d2")),h=n.n(g),b=n("f00f");r["default"].config.productionTip=!1,r["default"].use(p.a),r["default"].use(h.a),Object(b["b"])()&&(d["a"].dispatch("SetMsgArr",Object(b["b"])().id),d["a"].commit("init",Object(b["b"])().id),d["a"].commit("message",Object(b["b"])().id)),new r["default"]({router:f["a"],store:d["a"],render:function(e){return e(u)}}).$mount("#app")},df4e:function(e,t,n){},f00f:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return c}));n("b4fb"),n("ecb4"),n("e35a"),n("0d7a");var r=n("0261"),o=new r["default"];function a(){var e=o.$cookies.get("userInfo")?JSON.parse("{".concat(decodeURIComponent("".concat(o.$cookies.get("userInfo"))).split(":{")[1])):"";return e}function i(){var e=document.querySelector(".chat_msg-list");e.scrollTop=e.scrollHeight}function c(e){var t=new Date,n={YY:t.getFullYear(),MM:t.getMonth()+1>9?t.getMonth()+1:"0".concat(t.getMonth()+1),DD:t.getDate()>9?t.getDate():"0".concat(t.getDate()),hh:t.getHours()>9?t.getHours():"0".concat(t.getHours()),mm:t.getMinutes()>9?t.getMinutes():"0".concat(t.getMinutes())};return"Y-M-D"===e?"".concat(n.YY,"-").concat(n.MM,"-").concat(n.DD):"".concat(n.YY,"-").concat(n.MM,"-").concat(n.DD," ").concat(n.hh,":").concat(n.mm)}}});
//# sourceMappingURL=app.7ee95dea.js.map